<mvc:View
    xmlns:form="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:m="sap.m"
    xmlns:f="sap.f"
    xmlns:st="sap.ui.comp.smarttable"
    controllerName="sync.c16.zcamm221.controller.Main"
    xmlns:html="http://www.w3.org/1999/xhtml"
>
    <Page
        id="page"
        title="{i18n>title}"
    >
        <f:DynamicPage
            id="dynamicPage"
            fitContent="true"
            headerPinned="true"
            footer="true"
            showFooter="true"
        >
            <f:header>
                <f:DynamicPageHeader>
                    <SmartFilterBar
                        xmlns="sap.ui.comp.smartfilterbar"
                        id="smartFilterBar"
                        entitySet="ZCA_CDS_V_220"
                        search=".onFilterSearch"
                    >
                        <controlConfiguration>
                            <ControlConfiguration
                                key="WERKS"
                                visibleInAdvancedArea="true"
                                label="플랜트"
                            />
                            <ControlConfiguration
                                key="LGORT"
                                visibleInAdvancedArea="true"
                                label="창고"
                            />
                        </controlConfiguration>
                        <layoutData>
                            <m:FlexItemData shrinkFactor="0" />
                        </layoutData>
                    </SmartFilterBar>
                    <HBox justifyContent="End">
                        <VBox>
                            <html:div
                                id="qrContainer"
                                style="margin-top:10px;"
                            />
                        </VBox>
                        <Button
                            id="Button1"
                            text="재고 보기"
                            icon="sap-icon://search"
                            press=".onPressButton"
                            class="sapUiTinyMarginEnd"
                            type="Attention"
                        />
                    </HBox>
                </f:DynamicPageHeader>
            </f:header>

            <f:content>
                <st:SmartTable
                    id="smartTable"
                    entitySet="ZCA_CDS_V_220"
                    smartFilterId="smartFilterBar"
                    tableType="ResponsiveTable"
                    useExportToExcel="true"
                    header="플랜트 창고별 자재 현황"
                    enableAutoBinding="true"
                    useTablePersonalisation="true"
                    headerStyle="Auto"
                    showRowCount="true"
                    showFullScreenButton="true"
                    persistencyKey="smartTableGroup"
                    beforeRebindTable="onBeforeRebindTable"
                />
            </f:content>

            <f:footer>
                <OverflowToolbar>
                    <ToolbarSpacer />
                    <HBox justifyContent="Center">
                        <Button
                            icon="sap-icon://search"
                            id="button2"
                            text="QR 코드 스캔"
                            press=".onPressQRScan"
                            type="Emphasized"
                        />
                    </HBox>
                </OverflowToolbar>
            </f:footer>
        </f:DynamicPage>
    </Page>
</mvc:View>
